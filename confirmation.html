<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Confirmation | Ciza Logistics</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:Arial,Helvetica,sans-serif;background:#0a0a0a;color:#fff;}
.container{width:92%;max-width:1100px;margin:auto;}
html{scroll-behavior:smooth;}

/* HEADER IDENTIQUE INDEX */
.main-header{
position:fixed;width:100%;background:#000;
padding:26px 0;z-index:1000;
}
.header-container{
display:flex;justify-content:space-between;align-items:center;
}
.logo img{height:90px;}
.nav-menu{display:flex;gap:22px;align-items:center;}
.nav-menu a{
color:#fff;text-decoration:none;text-transform:uppercase;
font-size:13px;letter-spacing:1px;
}
.nav-menu a:hover{color:#D4AF37;}
.btn-outline{
border:1px solid #D4AF37;
padding:8px 14px;border-radius:12px;
color:#D4AF37;text-decoration:none;font-size:12px;
}

/* HERO CONFIRMATION */
.hero{
padding-top:180px;
padding-bottom:80px;
text-align:center;
}
.tracking-box{
background:#111;
padding:40px;
border-radius:20px;
box-shadow:0 0 40px rgba(212,175,55,0.2);
border:1px solid rgba(212,175,55,0.3);
}

.tracking-code{
font-size:28px;
letter-spacing:3px;
color:#D4AF37;
margin-bottom:15px;
text-shadow:0 0 15px rgba(212,175,55,0.5);
}

.status{
margin-top:10px;
font-size:16px;
color:#ccc;
}

.copy-btn{
margin-top:15px;
background:#D4AF37;
border:none;
padding:10px 20px;
border-radius:12px;
cursor:pointer;
font-weight:bold;
}

/* TIMELINE */
.timeline{
margin-top:50px;
display:flex;
justify-content:space-between;
position:relative;
}

.timeline::before{
content:"";
position:absolute;
top:15px;left:0;right:0;
height:3px;background:#333;
z-index:0;
}

.step{
text-align:center;
position:relative;
z-index:1;
width:25%;
}

.circle{
width:30px;height:30px;
border-radius:50%;
background:#333;
margin:auto;
margin-bottom:10px;
}

.active .circle{
background:#D4AF37;
box-shadow:0 0 15px rgba(212,175,55,0.7);
}

.step p{
font-size:12px;color:#aaa;
}

.active p{color:#D4AF37;font-weight:bold;}

.error-box{
text-align:center;
padding:200px 20px;
}

.footer{
background:#000;color:#777;
padding:40px 0;text-align:center;
margin-top:100px;
}
</style>
</head>

<body>

<header class="main-header">
<div class="container header-container">
<div class="logo">
<img src="https://raw.githubusercontent.com/cizaimmo/ciza-logistics/4b1ea6a2d3697e3982880984ee31dca42d8c52fc/logo.png">
</div>
<nav class="nav-menu">
<a href="index.html">Accueil</a>
<a href="tracking.html">Suivi colis</a>
<a href="parcel.html">Parcel</a>
<a href="enterprise.html">Entreprise</a>
<a href="login.html">Connexion</a>
<a href="signup.html" class="btn-outline">Créer un compte</a>
</nav>
</div>
</header>

<div id="content"></div>

<footer class="footer">
© 2026 Ciza Logistics – Tous droits réservés
</footer>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyCIUVom1diEV4ESa3QEcICOZRv0TNSydx8",
authDomain: "ciza-logistics.firebaseapp.com",
projectId: "ciza-logistics",
storageBucket: "ciza-logistics.firebasestorage.app",
messagingSenderId: "751524585771",
appId: "1:751524585771:web:6720db623a0ef70f56e56e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const params = new URLSearchParams(window.location.search);
const tracking = params.get("tracking");

const content = document.getElementById("content");

if(!tracking){
content.innerHTML = `<div class="error-box"><h2>Code tracking invalide</h2></div>`;
}else{

const q = query(collection(db,"shipments"), where("trackingCode","==",tracking));
const snapshot = await getDocs(q);

if(snapshot.empty){
content.innerHTML = `<div class="error-box"><h2>Code tracking introuvable</h2></div>`;
}else{

let data = snapshot.docs[0].data();
let status = data.status;

let step1="", step2="", step3="", step4="";

if(status==="pending"){step1="active";}
if(status==="validated"){step1="active";step2="active";}
if(status==="in_transit"){step1="active";step2="active";step3="active";}
if(status==="delivered"){step1="active";step2="active";step3="active";step4="active";}

content.innerHTML = `
<section class="hero">
<div class="container">
<div class="tracking-box">
<div class="tracking-code">${tracking}</div>
<button class="copy-btn" onclick="navigator.clipboard.writeText('${tracking}')">Copier</button>
<div class="status">Statut : ${status}</div>

<div class="timeline">
<div class="step ${step1}">
<div class="circle"></div>
<p>Créé</p>
</div>
<div class="step ${step2}">
<div class="circle"></div>
<p>Confirmé</p>
</div>
<div class="step ${step3}">
<div class="circle"></div>
<p>En transit</p>
</div>
<div class="step ${step4}">
<div class="circle"></div>
<p>Livré</p>
</div>
</div>

</div>
</div>
</section>
`;
}

}

</script>

</body>
</html>
