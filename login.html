<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion S√©curis√©e | Ciza Logistics</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter;
background:#000;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
color:#fff;
overflow:hidden;
}

/* Background subtle gold motion */
body:before{
content:"";
position:absolute;
width:700px;
height:700px;
background:radial-gradient(circle,rgba(212,175,55,0.08),transparent 70%);
top:-250px;
right:-250px;
animation:floatGlow 6s ease-in-out infinite alternate;
}

@keyframes floatGlow{
from{transform:translateY(0);}
to{transform:translateY(30px);}
}

/* Wrapper */
.wrapper{
width:100%;
padding:20px;
display:flex;
justify-content:center;
align-items:center;
}

/* Card */
.card{
width:100%;
max-width:420px;
background:rgba(15,15,15,0.92);
backdrop-filter:blur(25px);
border-radius:34px;
padding:60px 30px 45px 30px;
border:1px solid rgba(212,175,55,0.4);
box-shadow:0 50px 140px rgba(0,0,0,0.8);
position:relative;
animation:fadeUp 0.8s ease;
}

@keyframes fadeUp{
from{opacity:0;transform:translateY(30px);}
to{opacity:1;transform:translateY(0);}
}

/* Back */
.back{
position:absolute;
top:20px;
left:22px;
font-size:13px;
color:#D4AF37;
cursor:pointer;
opacity:0.7;
transition:0.3s;
}
.back:hover{opacity:1;}

/* Logo */
.logo{
text-align:center;
margin-bottom:25px;
}
.logo img{
width:220px;
max-width:100%;
animation:logoPulse 3s infinite ease-in-out;
filter:drop-shadow(0 0 18px rgba(212,175,55,0.5));
}

@keyframes logoPulse{
0%{transform:scale(1);}
50%{transform:scale(1.04);}
100%{transform:scale(1);}
}

/* Titles */
.title{
text-align:center;
font-size:22px;
color:#D4AF37;
margin-bottom:8px;
letter-spacing:0.5px;
}

.subtitle{
text-align:center;
font-size:13px;
color:#aaa;
margin-bottom:30px;
}

/* Secure badge */
.secure{
text-align:center;
font-size:11px;
color:#777;
margin-bottom:18px;
}

/* Inputs */
.group{margin-bottom:18px;}

input{
width:100%;
padding:16px;
border-radius:18px;
border:1px solid rgba(255,255,255,0.08);
background:#111;
color:#fff;
font-size:14px;
transition:0.3s;
}

input:focus{
outline:none;
border:1px solid #D4AF37;
box-shadow:0 0 0 3px rgba(212,175,55,0.15);
}

/* Button */
button{
width:100%;
padding:16px;
border-radius:18px;
border:none;
background:linear-gradient(90deg,#D4AF37,#f7d47b);
color:#000;
font-weight:900;
cursor:pointer;
font-size:14px;
transition:0.3s;
}

button:hover{
transform:translateY(-2px);
box-shadow:0 20px 50px rgba(212,175,55,0.5);
}

/* Loader */
.loader{
display:none;
margin-top:18px;
text-align:center;
font-size:12px;
color:#D4AF37;
}

/* Fade screen transition */
.fade-screen{
position:fixed;
inset:0;
background:#000;
opacity:0;
pointer-events:none;
transition:0.6s;
z-index:999;
}
.fade-screen.active{
opacity:1;
pointer-events:auto;
}

/* Footer */
.footer{
text-align:center;
font-size:11px;
color:#555;
margin-top:28px;
}

/* Desktop */
@media(min-width:768px){
.card{padding:70px 40px 55px 40px;}
.logo img{width:250px;}
.title{font-size:24px;}
}
</style>
</head>

<body>

<div class="fade-screen" id="fadeScreen"></div>

<div class="wrapper">
<div class="card">

<div class="back" onclick="goBack()">‚Üê Retour</div>

<div class="logo">
<img src="https://raw.githubusercontent.com/cizaimmo/ciza-logistics/4b1ea6a2d3697e3982880984ee31dca42d8c52fc/logo.png">
</div>

<div class="title">Connexion S√©curis√©e</div>
<div class="subtitle">Acc√®s r√©serv√© aux chauffeurs et administrateurs</div>

<div class="secure">üîí Connexion chiffr√©e TLS 1.3 ‚Ä¢ Infrastructure s√©curis√©e</div>

<div class="group">
<input type="email" id="email" placeholder="Email professionnel">
</div>

<div class="group">
<input type="password" id="password" placeholder="Mot de passe">
</div>

<button onclick="login()">Se connecter</button>

<div class="loader" id="loader">V√©rification des identifiants...</div>

<div class="footer">
¬© 2026 Ciza Logistics ‚Äì Division de Ciza Group
</div>

</div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyCIUVom1diEV4ESa3QEcICOZRv0TNSydx8",
authDomain:"ciza-logistics.firebaseapp.com",
projectId:"ciza-logistics"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

window.login=async function(){

const loader=document.getElementById("loader");
const fade=document.getElementById("fadeScreen");
loader.style.display="block";

try{
const cred=await signInWithEmailAndPassword(
auth,
document.getElementById("email").value.trim(),
document.getElementById("password").value.trim()
);

const snap=await getDoc(doc(db,"users",cred.user.uid));

if(!snap.exists()){
alert("Aucun profil trouv√©.");
loader.style.display="none";
return;
}

const data=snap.data();

if(data.suspended === true){
alert("Compte suspendu.");
loader.style.display="none";
return;
}

if(data.approved !== true){
alert("Compte non approuv√©.");
loader.style.display="none";
return;
}

fade.classList.add("active");

setTimeout(()=>{

if(data.role==="driver"){
location.href="driver-tool.html";
}
else if(data.role==="admin_parcel"){
location.href="admin-parcel.html";
}
else if(data.role==="admin_enterprise"){
location.href="admin-enterprise.html";
}
else if(data.role==="admin_freight"){
location.href="admin-freight.html";
}
else if(data.role==="superadmin"){
location.href="super-admin.html";
}
else{
alert("R√¥le non reconnu.");
loader.style.display="none";
}

},600);

}catch(e){
loader.style.display="none";
alert("Email ou mot de passe incorrect.");
}
};

window.goBack=function(){
window.history.back();
};

</script>

</body>
</html>
