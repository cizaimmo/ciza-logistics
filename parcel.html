<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ciza Parcel | Livraison Nationale</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:Arial,Helvetica,sans-serif;background:#fff;color:#111;}
.container{width:92%;max-width:1200px;margin:auto;}
html{scroll-behavior:smooth;}

/* HEADER */
.main-header{
position:fixed;width:100%;background:rgba(0,0,0,0.98);
padding:22px 0;z-index:1000;
}
.header-container{display:flex;justify-content:space-between;align-items:center;}
.logo img{height:78px;}

.nav-menu{display:flex;gap:22px;align-items:center;}
.nav-menu a{
color:#fff;text-decoration:none;text-transform:uppercase;
font-size:13px;letter-spacing:1px;
}
.nav-menu a:hover{color:#D4AF37;}
.btn-outline{
border:1px solid #D4AF37;
padding:8px 14px;border-radius:12px;
color:#D4AF37;text-decoration:none;font-size:12px;
}

/* MOBILE MENU PREMIUM */
.hamburger{
display:none;width:42px;height:42px;border:1px solid rgba(255,255,255,0.2);
background:transparent;border-radius:12px;cursor:pointer;
align-items:center;justify-content:center;z-index:3000;
}
.hamburger span,.hamburger span:before,.hamburger span:after{
width:18px;height:2px;background:#fff;display:block;position:relative;content:"";
}
.hamburger span:before{position:absolute;top:-6px;}
.hamburger span:after{position:absolute;top:6px;}

.mobile-overlay{
position:fixed;inset:0;background:rgba(0,0,0,0.70);
opacity:0;pointer-events:none;transition:0.3s;z-index:1999;
}
.mobile-menu{
position:fixed;top:0;right:0;height:100%;
width:280px;background:#000;
transform:translateX(100%);
transition:0.3s;padding:50px 25px;z-index:2000;
border-left:1px solid rgba(212,175,55,0.25);
}
.mobile-menu a{
display:block;color:#fff;text-decoration:none;
margin-bottom:20px;text-transform:uppercase;
padding:12px 14px;border-radius:14px;
background:rgba(255,255,255,0.06);
}
.mobile-menu a:hover{color:#D4AF37;}
.menu-open .mobile-menu{transform:translateX(0);}
.menu-open .mobile-overlay{opacity:1;pointer-events:auto;}

/* HERO */
.hero{
min-height:70vh;
background:url('https://raw.githubusercontent.com/cizaimmo/ciza-logistics/a9a34fb65e97e401a401f0472ac58dd5ca5acc54/ciza-percel.png') center/cover no-repeat;
display:flex;align-items:flex-end;padding-top:140px;
}
.hero-overlay{
background:linear-gradient(180deg,rgba(0,0,0,0.80),rgba(0,0,0,0.55));
width:100%;padding:70px 0;
}
.hero-content{color:#fff;max-width:820px;}
.hero h1{font-size:44px;margin-bottom:10px;}
.hero p{color:#e7e7e7;margin-bottom:18px;line-height:1.6;}

.btn{
display:inline-block;padding:14px 26px;border-radius:14px;
text-decoration:none;margin-right:10px;
}
.btn-primary{background:#D4AF37;color:#000;font-weight:900;}
.btn-dark{border:1px solid #fff;color:#fff;}

/* FORM SECTION */
.section{padding:70px 0;}
.section h2{font-size:28px;margin-bottom:18px;text-align:left;}

.form-shell{
background:#0f0f10;
border-radius:26px;
padding:26px;
box-shadow:0 30px 90px rgba(0,0,0,0.25);
border:1px solid rgba(212,175,55,0.18);
color:#fff;
}

.grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:18px;
}

.block{
background:rgba(255,255,255,0.04);
border:1px solid rgba(255,255,255,0.08);
border-radius:18px;
padding:18px;
}

.block-title{
font-size:12px;letter-spacing:1px;text-transform:uppercase;
color:#cfcfcf;margin-bottom:10px;
}

label{
display:block;
font-size:12px;
color:#bfbfbf;
margin:10px 0 6px;
text-transform:uppercase;
letter-spacing:0.6px;
}

input,select,textarea{
width:100%;
padding:14px 14px;
border-radius:14px;
border:1px solid rgba(255,255,255,0.10);
background:rgba(0,0,0,0.35);
color:#fff;
outline:none;
}
textarea{min-height:92px;resize:none;}
input::placeholder,textarea::placeholder{color:rgba(255,255,255,0.55);}

.row-2{grid-column:1/-1;}

.small-note{
font-size:12px;color:rgba(255,255,255,0.70);
margin-top:8px;line-height:1.5;
}

.error{
color:#ff6b6b;
font-size:13px;
margin:0 0 12px 0;
}

.summary{
background:rgba(212,175,55,0.10);
border:1px solid rgba(212,175,55,0.22);
color:#f6e7b5;
padding:14px 14px;border-radius:14px;
font-size:13px;
}

.actions{
display:flex;gap:12px;flex-wrap:wrap;margin-top:18px;
}
.action-btn{
flex:1;
min-width:220px;
text-align:center;
padding:14px 18px;border-radius:16px;
text-decoration:none;
cursor:pointer;
border:none;
font-weight:900;
}
.action-primary{background:#D4AF37;color:#000;}
.action-secondary{background:rgba(255,255,255,0.10);color:#fff;border:1px solid rgba(255,255,255,0.18);}

.support{
margin-top:18px;
text-align:center;
color:#D4AF37;
font-size:13px;
}

.checkbox-line{
display:flex;gap:10px;align-items:flex-start;
padding:12px;border-radius:14px;
background:rgba(255,255,255,0.04);
border:1px solid rgba(255,255,255,0.08);
margin-top:12px;
}
.checkbox-line input{width:18px;height:18px;margin-top:2px;}
.checkbox-line span{font-size:13px;color:rgba(255,255,255,0.82);line-height:1.45;}

.footer{
background:#000;color:#fff;padding:40px 0;text-align:center;margin-top:60px;
}

/* MOBILE */
@media(max-width:900px){
.nav-menu{display:none;}
.hamburger{display:flex;}
.hero h1{font-size:30px;}
.grid{grid-template-columns:1fr;}
.actions{flex-direction:column;}
.action-btn{min-width:100%;}
}
</style>
</head>

<body>

<div class="mobile-overlay" id="mobileOverlay"></div>
<div class="mobile-menu" id="mobileMenu">
<a href="index.html" onclick="closeMenu()">Accueil</a>
<a href="tracking.html" onclick="closeMenu()">Suivi colis</a>
<a href="enterprise.html" onclick="closeMenu()">Entreprise</a>
<a href="login.html" onclick="closeMenu()">Connexion</a>
<a href="signup.html" onclick="closeMenu()">Cr√©er un compte</a>
</div>

<header class="main-header">
<div class="container header-container">
<div class="logo">
<img src="https://raw.githubusercontent.com/cizaimmo/ciza-logistics/4b1ea6a2d3697e3982880984ee31dca42d8c52fc/logo.png">
</div>

<nav class="nav-menu">
<a href="index.html">Accueil</a>
<a href="tracking.html">Suivi colis</a>
<a href="enterprise.html">Entreprise</a>
<a href="login.html">Connexion</a>
<a href="signup.html" class="btn-outline">Cr√©er un compte</a>
</nav>

<button class="hamburger" onclick="toggleMenu()"><span></span></button>
</div>
</header>

<section class="hero">
<div class="hero-overlay">
<div class="container">
<div class="hero-content">
<h1>Ciza Parcel</h1>
<p>Cr√©er un envoi en quelques secondes. Suivi s√©curis√© et confirmation claire.</p>
<a href="#form" class="btn btn-primary">Cr√©er un envoi</a>
<a href="tracking.html" class="btn btn-dark">Suivre un colis</a>
</div>
</div>
</div>
</section>

<section id="form" class="section">
<div class="container">
<h2>Cr√©er un envoi</h2>

<div class="form-shell">

<div id="errorMsg" class="error"></div>

<div class="grid">

<!-- SERVICE / ROUTE -->
<div class="block">
<div class="block-title">Route</div>

<label for="country">Pays</label>
<select id="country">
<option value="">Choisir le pays</option>
<option value="BI">üáßüáÆ Burundi</option>
<option value="RW">üá∑üáº Rwanda</option>
</select>

<label for="origin">Province / Ville d√©part</label>
<select id="origin">
<option value="">S√©lectionner</option>
</select>

<label for="destination">Province / Ville destination</label>
<select id="destination">
<option value="">S√©lectionner</option>
</select>

<label for="payment">Mode de paiement</label>
<select id="payment">
<option value="">S√©lectionner</option>
<option value="Lumicash">Lumicash</option>
<option value="EcoCash">EcoCash</option>
<option value="eNoti">eNoti</option>
<option value="COD">Paiement √† la livraison</option>
</select>

</div>

<!-- CONTACT -->
<div class="block">
<div class="block-title">Contacts</div>

<label for="sender">Nom exp√©diteur</label>
<input type="text" id="sender" placeholder="Ex: Ciza Logi">

<label for="phone">T√©l√©phone (num√©rique)</label>
<input type="tel" id="phone" inputmode="numeric" placeholder="+257XXXXXXXX" autocomplete="tel">

<label for="receiver">Nom destinataire</label>
<input type="text" id="receiver" placeholder="Ex: Client / Boutique">

<label for="receiverPhone">T√©l√©phone destinataire (num√©rique)</label>
<input type="tel" id="receiverPhone" inputmode="numeric" placeholder="+257XXXXXXXX" autocomplete="tel">
<div class="small-note">Le pr√©fixe s‚Äôadapte automatiquement au pays. Aucune lettre accept√©e.</div>
</div>

<!-- COLIS -->
<div class="block row-2">
<div class="block-title">Colis</div>

<div class="grid">
<div>
<label for="packageType">Type d‚Äôenvoi</label>
<select id="packageType">
<option value="">S√©lectionner</option>
<option value="enveloppe">Enveloppe</option>
<option value="boite">Bo√Æte</option>
<option value="bidon">Bidon</option>
</select>
</div>

<div>
<label for="declaredValue">Valeur d√©clar√©e (BIF/RWF)</label>
<input type="number" id="declaredValue" inputmode="numeric" placeholder="Ex: 50000">
</div>

<div id="extraFields" class="row-2"></div>

<div>
<label for="content">Contenu (description courte)</label>
<input type="text" id="content" placeholder="Ex: documents, accessoires, denr√©es...">
</div>

<div>
<label for="notes">Instructions (optionnel)</label>
<input type="text" id="notes" placeholder="Ex: fragile, appeler avant...">
</div>
</div>

<div class="checkbox-line">
<input type="checkbox" id="nonDangerous">
<span><strong>Mati√®res non dangereuses</strong> : je confirme que cet envoi ne contient pas de produits interdits ou dangereux.</span>
</div>

<label style="margin-top:14px;">R√©sum√©</label>
<div class="summary" id="summaryText">S√©lectionne le pays, les villes, le type d‚Äôenvoi‚Ä¶</div>

</div>

</div>

<div class="actions">
<button class="action-btn action-primary" onclick="submitForm()">Continuer vers confirmation</button>
<a class="action-btn action-secondary" href="tracking.html">Aller au suivi</a>
</div>

<div class="support">
Support : +257 79 94 50 07 ‚Ä¢ infos@cizalogistics.bi
</div>

</div>

</div>
</section>

<footer class="footer">
¬© 2026 Ciza Logistics | Division de Ciza Group ‚Äì Tous droits r√©serv√©s
</footer>

<!-- FIREBASE + LOGIQUE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyCIUVom1diEV4ESa3QEcICOZRv0TNSydx8",
authDomain: "ciza-logistics.firebaseapp.com",
projectId: "ciza-logistics",
storageBucket: "ciza-logistics.firebasestorage.app",
messagingSenderId: "751524585771",
appId: "1:751524585771:web:6720db623a0ef70f56e56e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* Provinces/regions */
const provincesBI=["Bujumbura","Bujumbura Rural","Gitega","Ngozi","Muyinga","Kayanza","Kirundo","Rutana","Ruyigi","Cankuzo","Makamba","Bururi","Mwaro","Muramvya","Bubanza","Cibitoke","Karusi","Rumonge"];
const provincesRW=["Kigali","Northern","Southern","Eastern","Western"];

const countryEl=document.getElementById("country");
const originEl=document.getElementById("origin");
const destEl=document.getElementById("destination");
const phoneEl=document.getElementById("phone");
const receiverPhoneEl=document.getElementById("receiverPhone");
const typeEl=document.getElementById("packageType");
const extraFields=document.getElementById("extraFields");
const summaryText=document.getElementById("summaryText");

/* Helpers */
function setCities(list){
originEl.innerHTML='<option value="">S√©lectionner</option>';
destEl.innerHTML='<option value="">S√©lectionner</option>';
list.forEach(p=>{
originEl.innerHTML+=`<option value="${p}">${p}</option>`;
destEl.innerHTML+=`<option value="${p}">${p}</option>`;
});
}

function enforceNumericPhone(input){
let v=input.value || "";
v=v.replace(/[^\d+]/g,"");
if(v.indexOf("+")>0){v=v.replace(/\+/g,"");}
input.value=v;
}

function applyPrefix(country){
const prefix = country==="BI" ? "+257" : "+250";
if(phoneEl.value.trim()==="" || phoneEl.value.startsWith("+")){
phoneEl.value=prefix;
}
if(receiverPhoneEl.value.trim()==="" || receiverPhoneEl.value.startsWith("+")){
receiverPhoneEl.value=prefix;
}
}

function generateTracking(country){
const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
let result="CL-"+country+"-";
for(let i=0;i<8;i++){result+=chars.charAt(Math.floor(Math.random()*chars.length));}
return result;
}

function updateSummary(){
const country=countryEl.value;
const origin=originEl.value;
const dest=destEl.value;
const type=typeEl.value;
let cLabel = country==="BI" ? "Burundi" : (country==="RW" ? "Rwanda" : "‚Äî");
summaryText.innerText = (country && origin && dest && type)
? `${cLabel} ‚Ä¢ ${origin} ‚Üí ${dest} ‚Ä¢ ${type}`
: "S√©lectionne le pays, les villes, le type d‚Äôenvoi‚Ä¶";
}

/* Events */
countryEl.addEventListener("change",function(){
if(this.value==="BI"){setCities(provincesBI);applyPrefix("BI");}
else if(this.value==="RW"){setCities(provincesRW);applyPrefix("RW");}
else{setCities([]);phoneEl.value="";receiverPhoneEl.value="";}
updateSummary();
});

[originEl,destEl,typeEl].forEach(el=>el.addEventListener("change",updateSummary));

phoneEl.addEventListener("input",()=>enforceNumericPhone(phoneEl));
receiverPhoneEl.addEventListener("input",()=>enforceNumericPhone(receiverPhoneEl));

typeEl.addEventListener("change",function(){
if(this.value==="boite"){
extraFields.innerHTML=`
<div class="grid">
<div>
<label>Longueur (cm)</label>
<input id="len" type="number" inputmode="numeric" placeholder="Ex: 30">
</div>
<div>
<label>Largeur (cm)</label>
<input id="wid" type="number" inputmode="numeric" placeholder="Ex: 20">
</div>
<div>
<label>Hauteur (cm)</label>
<input id="hei" type="number" inputmode="numeric" placeholder="Ex: 15">
</div>
<div>
<label>Poids (kg)</label>
<input id="wei" type="number" inputmode="decimal" placeholder="Ex: 2.5">
</div>
</div>`;
}
else if(this.value==="bidon"){
extraFields.innerHTML=`
<div class="grid">
<div>
<label>Capacit√©</label>
<select id="cap">
<option value="">S√©lectionner</option>
<option value="10L">10L</option>
<option value="20L">20L</option>
<option value="50L">50L</option>
</select>
</div>
<div>
<label>Quantit√© totale</label>
<input id="qty" type="number" inputmode="numeric" placeholder="Ex: 5">
</div>
</div>`;
}
else if(this.value==="enveloppe"){
extraFields.innerHTML=`
<div class="grid">
<div>
<label>Format / dimensions</label>
<input id="env" type="text" placeholder="Ex: A4 / A5 / 30x20 cm">
</div>
<div>
<label>Poids estim√© (kg)</label>
<input id="wei2" type="number" inputmode="decimal" placeholder="Ex: 0.5">
</div>
</div>`;
}
else{
extraFields.innerHTML="";
}
updateSummary();
});

window.submitForm=async function(){
document.getElementById("errorMsg").innerText="";

const country=countryEl.value;
const sender=document.getElementById("sender").value.trim();
const phone=phoneEl.value.trim();
const receiver=document.getElementById("receiver").value.trim();
const receiverPhone=receiverPhoneEl.value.trim();
const origin=originEl.value;
const destination=destEl.value;
const payment=document.getElementById("payment").value;
const type=typeEl.value;
const declaredValue=document.getElementById("declaredValue").value;
const content=document.getElementById("content").value.trim();
const notes=document.getElementById("notes").value.trim();
const nonDangerous=document.getElementById("nonDangerous").checked;

if(!country||!sender||!phone||!receiver||!receiverPhone||!origin||!destination||!payment||!type||!nonDangerous){
document.getElementById("errorMsg").innerText="Veuillez compl√©ter tous les champs obligatoires (et confirmer mati√®res non dangereuses).";
return;
}

/* Extra validation per type */
let details={};
if(type==="boite"){
const len=document.getElementById("len")?.value;
const wid=document.getElementById("wid")?.value;
const hei=document.getElementById("hei")?.value;
const wei=document.getElementById("wei")?.value;
if(!len||!wid||!hei||!wei){
document.getElementById("errorMsg").innerText="Veuillez compl√©ter les dimensions et le poids de la bo√Æte.";
return;
}
details={lengthCm:Number(len),widthCm:Number(wid),heightCm:Number(hei),weightKg:Number(wei)};
}
if(type==="bidon"){
const cap=document.getElementById("cap")?.value;
const qty=document.getElementById("qty")?.value;
if(!cap||!qty){
document.getElementById("errorMsg").innerText="Veuillez compl√©ter la capacit√© et la quantit√© du bidon.";
return;
}
details={capacity:cap,quantity:Number(qty)};
}
if(type==="enveloppe"){
const env=document.getElementById("env")?.value?.trim();
const wei2=document.getElementById("wei2")?.value;
if(!env||!wei2){
document.getElementById("errorMsg").innerText="Veuillez compl√©ter le format et le poids estim√© de l‚Äôenveloppe.";
return;
}
details={format:env,weightKg:Number(wei2)};
}

const tracking=generateTracking(country);

await addDoc(collection(db,"shipments"),{
trackingCode:tracking,
service:"parcel",

country:country,

senderName:sender,
senderPhone:phone,
receiverName:receiver,
receiverPhone:receiverPhone,

fromCity:origin,
toCity:destination,

paymentMethod:payment,
packageType:type,

declaredValue: declaredValue ? Number(declaredValue) : null,
content: content || null,
notes: notes || null,

nonDangerous:true,
details:details,

/* FLOW BACKEND ALIGNMENT */
status:"created",
priceCalculated:false,
finalPrice:null,
priceBreakdown:null,

createdAt:serverTimestamp()
});

window.location.href="confirmation.html?tracking="+encodeURIComponent(tracking);
}
</script>

<script>
function toggleMenu(){document.body.classList.toggle("menu-open");}
function closeMenu(){document.body.classList.remove("menu-open");}
document.getElementById("mobileOverlay").addEventListener("click",closeMenu);
</script>

</body>
</html>
